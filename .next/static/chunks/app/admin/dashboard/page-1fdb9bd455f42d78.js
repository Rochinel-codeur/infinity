(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[427],{429:function(e,t,s){Promise.resolve().then(s.bind(s,6329))},9176:function(e,t,s){"use strict";s.d(t,{WhatsAppScreenshot:function(){return l}});var a=s(7437);function l(e){let{name:t="Coach Pronos",message:s="Validation Confirm\xe9e ! ✅",time:l="10:30",amount:i="500,000 XAF",imageUrl:r=null,type:n="win",className:d=""}=e;return(0,a.jsxs)("div",{className:"w-[280px] bg-[#0b141a] rounded-2xl overflow-hidden shadow-2xl border border-zinc-800/50 ".concat(d),children:[(0,a.jsxs)("div",{className:"bg-[#1f2c34] px-4 py-3 flex items-center gap-3 border-b border-[#2a373f] relative z-10",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-400 flex items-center justify-center overflow-hidden",children:(0,a.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:t.charAt(0)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"text-white text-sm font-semibold leading-none truncate",children:t}),(0,a.jsx)("p",{className:"text-[10px] text-zinc-400 mt-0.5",children:"En ligne"})]}),(0,a.jsx)("div",{className:"flex gap-3 text-[#00a884]",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M15.9 14.3H15L14.7 19H13.7L14.1 16.9H12.6L12.9 14.3H12L12.3 9H13.4L13 11.2H14.5L14.1 14.3H15.9ZM22 13.9C22 15.3 21.7 16.6 21.1 17.7C20.5 18.8 19.6 19.7 18.5 20.4C17.4 21.1 16.1 21.4 14.7 21.4C13.3 21.4 12 21.1 10.9 20.4C9.8 19.7 8.9 18.8 8.3 17.7C7.7 16.6 7.4 15.3 7.4 13.9C7.4 12.5 7.7 11.3 8.3 10.2C8.9 9.1 9.8 8.2 10.9 7.5C12 6.8 13.3 6.5 14.7 6.5C16.1 6.5 17.4 6.8 18.5 7.5C19.6 8.2 20.5 9.1 21.1 10.2C21.7 11.3 22 12.5 22 13.9ZM11.7 4.9C11.1 4.5 10.5 4.3 9.7 4.3C8.7 4.3 7.7 4.8 6.9 5.8C6.1 6.8 5.7 8.2 5.7 10H4.2C4.2 7.7 4.9 5.8 6.1 4.5C7.3 3.2 8.9 2.5 10.9 2.5C12.1 2.5 13.2 2.8 14.1 3.3L13.3 4.9H11.7Z"})})})]}),(0,a.jsxs)("div",{className:"bg-[#0b141a] p-4 min-h-[250px] flex flex-col justify-end space-y-3 relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 opacity-5 bg-[url('https://user-images.githubusercontent.com/15075759/28719144-86dc0f70-73b1-11e7-911d-60d70fcded21.png')] pointer-events-none"}),"win"===n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"self-start bg-[#1f2c34] text-white/90 p-2.5 rounded-lg rounded-tl-none max-w-[85%] text-xs shadow-sm relative z-10",children:[(0,a.jsx)("p",{children:"Voici le coupon du jour ! Grosse confiance \uD83D\uDC8E"}),(0,a.jsx)("span",{className:"text-[9px] text-white/50 block text-right mt-1",children:"10:15"})]}),(0,a.jsxs)("div",{className:"self-start bg-[#1f2c34] p-1 rounded-lg rounded-tl-none max-w-[85%] shadow-sm relative z-10",children:[r?(0,a.jsx)("div",{className:"relative overflow-hidden rounded",children:(0,a.jsx)("img",{src:r,alt:"Preuve de gain",className:"w-full h-auto max-h-48 object-cover rounded"})}):(0,a.jsxs)("div",{className:"bg-white p-3 rounded text-black font-mono text-[10px] w-48 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"border-b border-dashed border-black/20 pb-2 mb-2",children:(0,a.jsx)("h4",{className:"font-bold text-center text-xs",children:"TICKET #882910"})}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Dortmund - PSG"})," ",(0,a.jsx)("span",{children:"1"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Real - City"})," ",(0,a.jsx)("span",{children:"X"})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold pt-1",children:[(0,a.jsx)("span",{children:"Cote Totale"})," ",(0,a.jsx)("span",{children:"45.2"})]})]}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-20 border-4 border-green-600 rounded-full opacity-30 -rotate-12 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-green-600 font-bold text-lg",children:"GAGN\xc9"})})]}),(0,a.jsx)("span",{className:"text-[9px] text-white/50 block text-right pr-2 pb-1 mt-1",children:"10:15"})]}),(0,a.jsxs)("div",{className:"self-end bg-[#005c4b] text-white p-2.5 rounded-lg rounded-tr-none max-w-[85%] text-xs shadow-sm relative z-10",children:[(0,a.jsx)("p",{children:"Woooow merci coach ! Valid\xe9 ✅"}),(0,a.jsxs)("p",{className:"mt-1 font-bold",children:["Encaissement : ",i]}),(0,a.jsxs)("div",{className:"flex justify-end items-center gap-1 mt-1",children:[(0,a.jsx)("span",{className:"text-[9px] text-white/70",children:l}),(0,a.jsx)("svg",{className:"w-3 h-3 text-[#53bdeb]",viewBox:"0 0 16 15",width:"16",height:"15",children:(0,a.jsx)("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})})]})]})]}),"thanks"===n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"self-start bg-[#1f2c34] text-white/90 p-2.5 rounded-lg rounded-tl-none max-w-[85%] text-xs shadow-sm relative z-10",children:[(0,a.jsx)("p",{children:"Code Promo activ\xe9 ?"}),(0,a.jsx)("span",{className:"text-[9px] text-white/50 block text-right mt-1",children:"09:40"})]}),(0,a.jsxs)("div",{className:"self-end bg-[#005c4b] text-white p-2.5 rounded-lg rounded-tr-none max-w-[85%] text-xs shadow-sm relative z-10",children:[(0,a.jsx)("p",{children:"Oui j'ai re\xe7u le bonus de 200% direct ! Merci pour l'info \uD83D\uDD25"}),(0,a.jsxs)("div",{className:"flex justify-end items-center gap-1 mt-1",children:[(0,a.jsx)("span",{className:"text-[9px] text-white/70",children:"09:42"}),(0,a.jsx)("svg",{className:"w-3 h-3 text-[#53bdeb]",viewBox:"0 0 16 15",width:"16",height:"15",children:(0,a.jsx)("path",{fill:"currentColor",d:"M15.01 3.316l-.478-.372a.365.365 0 0 0-.51.063L8.666 9.879a.32.32 0 0 1-.484.033l-.358-.325a.319.319 0 0 0-.484.032l-.378.483a.418.418 0 0 0 .036.541l1.32 1.266c.143.14.361.125.484-.033l6.272-8.048a.366.366 0 0 0-.064-.512zm-4.1 0l-.478-.372a.365.365 0 0 0-.51.063L4.566 9.879a.32.32 0 0 1-.484.033L1.891 7.769a.366.366 0 0 0-.515.006l-.423.433a.364.364 0 0 0 .006.514l3.258 3.185c.143.14.361.125.484-.033l6.272-8.048a.365.365 0 0 0-.063-.51z"})})]})]})]}),"generic"===n&&(0,a.jsx)("div",{className:"self-center bg-[#1f2c34/50] text-zinc-400 p-2 rounded-lg text-xs text-center",children:s})]}),(0,a.jsxs)("div",{className:"bg-[#1f2c34] p-2 flex items-center gap-2 relative z-10",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-[#2a373f] flex items-center justify-center text-zinc-400",children:(0,a.jsx)("span",{className:"text-sm",children:"+"})}),(0,a.jsx)("div",{className:"flex-1 bg-[#2a373f] h-8 rounded-full px-3 flex items-center",children:(0,a.jsx)("span",{className:"text-zinc-500 text-[10px]",children:"Message..."})}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-[#00a884] flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M12 2C17.5 2 22 6.5 22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2ZM11 16V8H13V16H11Z",transform:"rotate(90 12 12)"})})})]})]})}},6329:function(e,t,s){"use strict";s.d(t,{AdminDashboard:function(){return V}});var a=s(7437),l=s(2265),i=s(2514),r=s(1436),n=s(1156),d=s(6940),c=s(7059),o=s(2994),x=s(7719),m=s(2797),u=s(7031),h=s(4378),p=s(9376),g=s(7648);let b=[{id:"overview",label:"Vue d'ensemble",icon:"\uD83D\uDCCA"},{id:"analytics",label:"Analytics",icon:"\uD83D\uDCC8"},{id:"users",label:"Utilisateurs",icon:"\uD83D\uDC65"},{id:"screenshots",label:"Captures (Marquee)",icon:"\uD83D\uDDBC️"},{id:"testimonials",label:"Avis (D\xe9tails)",icon:"\uD83D\uDCAC"},{id:"videos",label:"Vid\xe9os",icon:"\uD83C\uDFAC"},{id:"push",label:"Notifications",icon:"\uD83D\uDD14"},{id:"settings",label:"Param\xe8tres",icon:"⚙️"}];function f(e){let{admin:t,activeTab:s,onTabChange:i,isOpen:r,onClose:n}=e,d=(0,p.useRouter)(),[c,o]=(0,l.useState)(!1);(0,l.useEffect)(()=>{o(document.documentElement.classList.contains("dark"))},[]);let x=async()=>{await fetch("/api/admin/logout",{method:"POST"}),d.push("/admin"),d.refresh()};return(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 lg:hidden",onClick:n}),(0,a.jsxs)("aside",{className:"\n        fixed inset-y-0 left-0 z-50 w-72 flex flex-col\n        bg-gradient-to-b from-indigo-950 via-indigo-900 to-purple-950\n        transform transition-all duration-300\n        ".concat(r?"translate-x-0":"-translate-x-full lg:translate-x-0","\n      "),children:[(0,a.jsxs)("div",{className:"flex-shrink-0 h-20 flex items-center gap-3 px-6 border-b border-white/10",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center shadow-lg shadow-indigo-500/30",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-white text-lg",children:"Admin Pro"}),(0,a.jsx)("p",{className:"text-xs text-indigo-200",children:"Tableau de bord"})]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"px-4 py-2 text-xs font-semibold text-indigo-300 uppercase tracking-wider",children:"Navigation"}),(0,a.jsx)("div",{className:"space-y-1",children:b.map(e=>(0,a.jsxs)("button",{onClick:()=>{i(e.id),n()},className:"\n                    w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all\n                    ".concat(s===e.id?"bg-white/15 text-white font-medium shadow-lg shadow-indigo-500/20":"text-indigo-200 hover:bg-white/5 hover:text-white","\n                  "),children:[(0,a.jsx)("span",{className:"text-xl",children:e.icon}),(0,a.jsx)("span",{children:e.label}),s===e.id&&(0,a.jsx)("span",{className:"ml-auto w-2 h-2 rounded-full bg-emerald-400"})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"px-4 py-2 text-xs font-semibold text-indigo-300 uppercase tracking-wider",children:"Actions rapides"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(g.default,{href:"/",target:"_blank",className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-indigo-200 hover:bg-white/5 hover:text-white transition-all",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83C\uDF10"}),(0,a.jsx)("span",{children:"Voir le site"}),(0,a.jsx)("svg",{className:"w-4 h-4 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]}),(0,a.jsxs)("button",{onClick:()=>{let e=!c;o(e),document.documentElement.classList.toggle("dark",e),localStorage.setItem("theme",e?"dark":"light")},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-indigo-200 hover:bg-white/5 hover:text-white transition-all",children:[(0,a.jsx)("span",{className:"text-xl",children:c?"☀️":"\uD83C\uDF19"}),(0,a.jsx)("span",{children:c?"Mode clair":"Mode sombre"}),(0,a.jsx)("div",{className:"ml-auto w-10 h-5 rounded-full transition-colors ".concat(c?"bg-indigo-500":"bg-slate-600"," relative"),children:(0,a.jsx)("div",{className:"absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform ".concat(c?"translate-x-5":"translate-x-0.5")})})]})]})]})]}),(0,a.jsxs)("div",{className:"flex-shrink-0 p-4 border-t border-white/10 bg-black/20 backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-400 to-purple-500 flex items-center justify-center shadow-lg",children:(0,a.jsx)("span",{className:"text-white font-bold",children:t.name.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-white truncate",children:t.name}),(0,a.jsx)("p",{className:"text-xs text-indigo-200 truncate",children:t.email})]})]}),(0,a.jsxs)("button",{onClick:x,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-xl bg-red-500/20 text-red-300 hover:bg-red-500/30 transition-colors text-sm font-medium",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"D\xe9connexion"]})]})]})]})}var j=s(3004);function v(e){let{title:t,subtitle:s,onRefresh:r}=e,[n,d]=(0,l.useState)([]),[c,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)(0),[u,h]=(0,l.useState)(!1),[p,b]=(0,l.useState)(!1),f=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/admin/notifications");if(e.ok){let t=await e.json();d(t.notifications||[]),m(t.unreadCount||0)}}catch(e){console.error(e)}},[]);(0,l.useEffect)(()=>{f();let e=setInterval(f,3e4);return b(document.documentElement.classList.contains("dark")),()=>clearInterval(e)},[f]);let v=async()=>{r&&(h(!0),await r(),await f(),setTimeout(()=>h(!1),500))},N=async e=>{d(t=>t.map(t=>t.id===e?{...t,read:!0}:t)),m(e=>Math.max(0,e-1));try{await fetch("/api/admin/notifications/".concat(e,"/read"),{method:"PUT"})}catch(e){console.error(e)}};return(0,a.jsxs)("header",{className:"h-16 bg-white/80 dark:bg-[#1e1e2e]/80 backdrop-blur-xl border-b border-indigo-100 dark:border-indigo-900/30 flex items-center justify-between px-6 sticky top-0 z-30",children:[(0,a.jsxs)("div",{className:"lg:ml-0 ml-12",children:[(0,a.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:t}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:s||(0,i.WU)(new Date,"EEEE d MMMM yyyy",{locale:j.fr})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(g.default,{href:"/",target:"_blank",className:"hidden sm:flex items-center gap-2 px-3 py-2 rounded-xl text-slate-600 dark:text-slate-300 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors",title:"Voir le site",children:[(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),(0,a.jsx)("span",{className:"text-sm",children:"Site"})]}),(0,a.jsx)("button",{onClick:()=>{let e=!p;b(e),document.documentElement.classList.toggle("dark",e),localStorage.setItem("theme",e?"dark":"light")},className:"p-2.5 rounded-xl hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors",title:p?"Mode clair":"Mode sombre",children:p?(0,a.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{className:"w-5 h-5 text-indigo-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("button",{onClick:()=>o(!c),className:"relative p-2.5 rounded-xl hover:bg-indigo-50 dark:hover:bg-indigo-900/30 transition-colors",children:[(0,a.jsx)("svg",{className:"w-5 h-5 text-slate-600 dark:text-slate-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),x>0&&(0,a.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center animate-pulse",children:x>9?"9+":x})]}),c&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-80 max-h-96 overflow-y-auto bg-white dark:bg-[#1e1e2e] rounded-2xl shadow-2xl border border-indigo-100 dark:border-indigo-900/50 z-50",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-indigo-100 dark:border-indigo-900/30 flex items-center justify-between sticky top-0 bg-white dark:bg-[#1e1e2e]",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Notifications"}),x>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 text-xs font-medium bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-300 rounded-full",children:[x," nouvelles"]})]}),(0,a.jsx)("div",{className:"p-2",children:0===n.length?(0,a.jsxs)("div",{className:"py-8 text-center",children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDD15"}),(0,a.jsx)("p",{className:"text-sm text-slate-500 mt-2",children:"Aucune notification"})]}):(0,a.jsx)("div",{className:"space-y-1",children:n.slice(0,10).map(e=>(0,a.jsx)("div",{onClick:()=>!e.read&&N(e.id),className:"p-3 rounded-xl transition-colors cursor-pointer relative ".concat(e.read?"hover:bg-slate-50 dark:hover:bg-slate-800/50 opacity-70":"bg-indigo-50/50 dark:bg-indigo-900/20 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 font-medium"),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("span",{className:"mt-0.5 w-8 h-8 rounded-full flex items-center justify-center text-sm ".concat("success"===e.type?"bg-emerald-100 dark:bg-emerald-900/30":"warning"===e.type?"bg-amber-100 dark:bg-amber-900/30":"error"===e.type?"bg-red-100 dark:bg-red-900/30":"bg-indigo-100 dark:bg-indigo-900/30"),children:"success"===e.type?"✓":"warning"===e.type?"⚠":"error"===e.type?"✕":"ℹ"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("p",{className:"text-sm ".concat(e.read?"text-slate-900 dark:text-white":"text-indigo-900 dark:text-indigo-100 font-bold"),children:e.title}),!e.read&&(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.message}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:(0,i.WU)(new Date(e.time),"HH:mm",{locale:j.fr})})]})]})},e.id))})})]})]}),r&&(0,a.jsxs)("button",{onClick:v,disabled:u,className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 transition-all ".concat(u?"opacity-75":""),children:[(0,a.jsx)("svg",{className:"w-4 h-4 ".concat(u?"animate-spin":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,a.jsx)("span",{className:"hidden sm:inline",children:u?"...":"Actualiser"})]})]})]})}var N=s(6810),w=s(62),y=s(407),k=s(5481),C=s(8822);function D(){let[e,t]=(0,l.useState)(null),[s,i]=(0,l.useState)(!0);(0,l.useEffect)(()=>{n()},[]);let n=async()=>{try{let e=await fetch("/api/admin/analytics");if(e.ok){let s=await e.json();t(s)}}catch(e){console.error(e)}finally{i(!1)}};return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full"})}):e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(S,{title:"Vues aujourd'hui",value:e.realtime.todayViews,growth:e.realtime.viewsGrowth,icon:"\uD83D\uDC41️",gradient:"from-indigo-500 to-purple-500"}),(0,a.jsx)(S,{title:"Copies du code",value:e.realtime.todayCopies,growth:e.realtime.copiesGrowth,icon:"\uD83D\uDCCB",gradient:"from-pink-500 to-rose-500"}),(0,a.jsx)(S,{title:"T\xe9l\xe9chargements",value:e.realtime.todayDownloads,icon:"\uD83D\uDCF2",gradient:"from-emerald-500 to-teal-500"}),(0,a.jsx)(S,{title:"Inscriptions",value:e.realtime.todaySignups,icon:"\uD83C\uDFAF",gradient:"from-amber-500 to-orange-500"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6 admin-chart-container",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Entonnoir de conversion"}),(0,a.jsx)("div",{className:"space-y-4",children:[{label:"Visiteurs",value:e.funnel.views,rate:100,color:"bg-indigo-500"},{label:"Copies du code",value:e.funnel.copies,rate:e.funnel.copyRate,color:"bg-purple-500"},{label:"T\xe9l\xe9chargements",value:e.funnel.downloads,rate:e.funnel.downloadRate,color:"bg-pink-500"},{label:"Inscriptions",value:e.funnel.signups,rate:e.funnel.signupRate,color:"bg-teal-500"}].map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,a.jsx)("span",{className:"text-slate-600 dark:text-slate-300",children:e.label}),(0,a.jsxs)("span",{className:"font-medium text-slate-900 dark:text-white",children:[e.value," (",e.rate,"%)"]})]}),(0,a.jsx)("div",{className:"h-3 bg-slate-100 dark:bg-slate-800 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(e.color," rounded-full transition-all"),style:{width:"".concat(e.rate,"%")}})})]},t))})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6 admin-chart-container",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Appareils"}),(0,a.jsx)("div",{className:"h-48 flex items-center justify-center",children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(N.u,{children:[(0,a.jsxs)(w.by,{data:[{name:"Mobile",value:e.devices.mobile},{name:"Desktop",value:e.devices.desktop}],cx:"50%",cy:"50%",innerRadius:50,outerRadius:80,paddingAngle:5,dataKey:"value",children:[(0,a.jsx)(y.b,{fill:"#6366f1"}),(0,a.jsx)(y.b,{fill:"#ec4899"})]}),(0,a.jsx)(x.u,{})]})})}),(0,a.jsxs)("div",{className:"flex justify-center gap-6 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full bg-indigo-500"}),(0,a.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Mobile ",e.devices.mobilePercent,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 rounded-full bg-pink-500"}),(0,a.jsxs)("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:["Desktop ",100-e.devices.mobilePercent,"%"]})]})]})]})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6 admin-chart-container",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Activit\xe9 (24 derni\xe8res heures)"}),(0,a.jsx)("div",{className:"h-64",children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(k.T,{data:e.hourlyActivity,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorEvents",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#e2e8f0",opacity:.3}),(0,a.jsx)(c.K,{dataKey:"label",tick:{fontSize:12},stroke:"#94a3b8"}),(0,a.jsx)(o.B,{tick:{fontSize:12},stroke:"#94a3b8"}),(0,a.jsx)(x.u,{contentStyle:{backgroundColor:"#1e1e2e",border:"1px solid #6366f1",borderRadius:"12px",color:"#fff"}}),(0,a.jsx)(C.uN,{type:"monotone",dataKey:"events",stroke:"#6366f1",strokeWidth:2,fillOpacity:1,fill:"url(#colorEvents)"})]})})})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Navigateurs"}),(0,a.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:e.browsers.slice(0,4).map(e=>(0,a.jsxs)("div",{className:"text-center p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50",children:[(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:e.count}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:e.name})]},e.name))})]})]}):null}function S(e){let{title:t,value:s,growth:l,icon:i,gradient:r}=e;return(0,a.jsxs)("div",{className:"admin-glass admin-stat-card rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:i}),void 0!==l&&(0,a.jsxs)("span",{className:"admin-badge ".concat(l>=0?"admin-badge-success":"admin-badge-error"),children:[l>=0?"+":"",l,"%"]})]}),(0,a.jsx)("p",{className:"text-3xl font-bold bg-gradient-to-r ".concat(r," bg-clip-text text-transparent"),children:s.toLocaleString("fr-FR")}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:t})]})}function A(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[n,d]=(0,l.useState)(""),[c,o]=(0,l.useState)(1),[x,m]=(0,l.useState)(1),[u,h]=(0,l.useState)(!1),p=(0,l.useCallback)(async()=>{r(!0);try{let e=new URLSearchParams({page:String(c),limit:"20"});n&&e.set("search",n);let s=await fetch("/api/admin/users?".concat(e));if(s.ok){let e=await s.json();t(e.users),m(e.pagination.totalPages)}}catch(e){console.error(e)}finally{r(!1)}},[c,n]);(0,l.useEffect)(()=>{p()},[p]);let g=async()=>{h(!0);try{let e=await fetch("/api/admin/export/users");if(e.ok){let t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="utilisateurs_".concat(new Date().toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(s)}}catch(e){console.error(e)}finally{h(!1)}},b=async e=>{if(confirm("Voulez-vous vraiment supprimer cet utilisateur ?"))try{(await fetch("/api/admin/users?id=".concat(e),{method:"DELETE"})).ok&&p()}catch(e){console.error(e)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 w-full sm:max-w-md relative",children:[(0,a.jsx)("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher par email, t\xe9l\xe9phone...",value:n,onChange:e=>d(e.target.value),className:"admin-input pl-12"})]}),(0,a.jsxs)("button",{onClick:g,disabled:u,className:"admin-btn-primary flex items-center gap-2",children:[u?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Exporter CSV"]})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"admin-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Contact"}),(0,a.jsx)("th",{children:"Code Promo"}),(0,a.jsx)("th",{children:"Source"}),(0,a.jsx)("th",{children:"Appareil"}),(0,a.jsx)("th",{children:"Statut"}),(0,a.jsx)("th",{children:"Date"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsx)("tbody",{children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"text-center py-12",children:(0,a.jsx)("div",{className:"animate-spin w-6 h-6 border-4 border-indigo-500 border-t-transparent rounded-full mx-auto"})})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"text-center py-12 text-slate-500",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDC65"}),(0,a.jsx)("p",{children:"Aucun utilisateur trouv\xe9"})]})})}):e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-slate-900 dark:text-white",children:e.email||"—"}),e.phone&&(0,a.jsx)("p",{className:"text-xs text-slate-500",children:e.phone})]})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"font-mono text-sm px-2 py-1 rounded-lg bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400",children:e.promoCode})}),(0,a.jsx)("td",{className:"text-slate-500",children:e.source||"—"}),(0,a.jsx)("td",{children:(0,a.jsxs)("span",{className:"flex items-center gap-1 text-slate-500",children:["mobile"===e.device?"\uD83D\uDCF1":"\uD83D\uDCBB"," ",e.device||"—"]})}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"admin-badge ".concat("active"===e.status?"admin-badge-success":"verified"===e.status?"admin-badge-info":"admin-badge-warning"),children:e.status})}),(0,a.jsx)("td",{className:"text-slate-500 text-sm",children:(0,i.WU)(new Date(e.createdAt),"dd/MM/yyyy HH:mm")}),(0,a.jsx)("td",{children:(0,a.jsx)("button",{onClick:()=>b(e.id),className:"p-2 text-slate-400 hover:text-red-500 transition-colors",title:"Supprimer",children:"\uD83D\uDDD1️"})})]},e.id))})]})}),x>1&&(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-indigo-100 dark:border-indigo-900/30 flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:["Page ",c," sur ",x]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>o(e=>Math.max(1,e-1)),disabled:1===c,className:"admin-btn-secondary px-3 py-1.5 text-sm disabled:opacity-50",children:"← Pr\xe9c\xe9dent"}),(0,a.jsx)("button",{onClick:()=>o(e=>Math.min(x,e+1)),disabled:c===x,className:"admin-btn-secondary px-3 py-1.5 text-sm disabled:opacity-50",children:"Suivant →"})]})]})]})]})}function E(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)("all"),[n,d]=(0,l.useState)(!0),[c,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)(null),[u,h]=(0,l.useState)({name:"",text:"",date:new Date().toISOString().split("T")[0],source:"WhatsApp",imageUrl:"",rating:5,file:null}),[p,g]=(0,l.useState)(null);(0,l.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await fetch("/api/admin/testimonials");if(e.ok){let s=await e.json();t(s.testimonials||[])}}catch(e){console.error("Error fetching testimonials",e)}finally{d(!1)}},f=(e,t)=>{g({type:e,message:t}),setTimeout(()=>g(null),3e3)},j=async(e,t)=>{try{await fetch("/api/admin/testimonials",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,isActive:!t})}),b(),f("success",t?"D\xe9sactiv\xe9":"Activ\xe9")}catch(e){console.error("Error toggling active status",e)}},v=async e=>{if(confirm("Supprimer ce t\xe9moignage ?"))try{await fetch("/api/admin/testimonials?id=".concat(e),{method:"DELETE"}),b(),f("success","Supprim\xe9")}catch(e){console.error("Error deleting testimonial",e)}},N=e=>{h({name:e.name,text:e.text,date:e.date.split("T")[0],source:e.source,imageUrl:e.imageUrl||"",rating:e.rating||5,file:null}),m(e.id),o(!0)},w=e.filter(e=>"pending"===s?!e.isActive:"active"!==s||e.isActive);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"flex gap-2 mb-2",children:[(0,a.jsxs)("button",{onClick:()=>r("all"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("all"===s?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:["Tous (",e.length,")"]}),(0,a.jsxs)("button",{onClick:()=>r("active"),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("active"===s?"bg-green-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:["Actifs (",e.filter(e=>e.isActive).length,")"]}),(0,a.jsxs)("button",{onClick:()=>r("pending"),className:"relative px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat("pending"===s?"bg-amber-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:["En attente (",e.filter(e=>!e.isActive).length,")",e.filter(e=>!e.isActive).length>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]})]})}),(0,a.jsxs)("button",{onClick:()=>{o(!c),m(null),h({name:"",text:"",date:new Date().toISOString().split("T")[0],source:"WhatsApp",imageUrl:"",rating:5,file:null})},className:"admin-btn-primary flex items-center gap-2",children:[(0,a.jsx)("span",{children:c?"✕":"+"})," ",c?"Annuler":"Ajouter"]})]}),c&&(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:x?"Modifier le t\xe9moignage":"Ajouter un nouveau t\xe9moignage"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Nom",value:u.name,onChange:e=>h({...u,name:e.target.value}),className:"admin-input"}),(0,a.jsx)("input",{type:"date",value:u.date,onChange:e=>h({...u,date:e.target.value}),className:"admin-input"}),(0,a.jsx)("textarea",{placeholder:"T\xe9moignage",value:u.text,onChange:e=>h({...u,text:e.target.value}),className:"admin-input md:col-span-2",rows:3}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-2 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Preuve (Image)"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return h({...u,file:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null})},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"}),(0,a.jsxs)("div",{className:"relative flex py-1 items-center",children:[(0,a.jsx)("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"}),(0,a.jsx)("span",{className:"flex-shrink-0 mx-2 text-xs text-slate-400 uppercase",children:"ou via URL"}),(0,a.jsx)("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})]}),(0,a.jsx)("input",{type:"text",placeholder:"https://...",value:u.imageUrl,onChange:e=>h({...u,imageUrl:e.target.value}),className:"admin-input"})]}),(0,a.jsxs)("select",{value:u.source,onChange:e=>h({...u,source:e.target.value}),className:"admin-input",children:[(0,a.jsx)("option",{value:"WhatsApp",children:"WhatsApp"}),(0,a.jsx)("option",{value:"Facebook",children:"Facebook"}),(0,a.jsx)("option",{value:"Instagram",children:"Instagram"}),(0,a.jsx)("option",{value:"Email",children:"Email"}),(0,a.jsx)("option",{value:"UserSubmission",children:"Soumission Utilisateur"})]}),(0,a.jsxs)("select",{value:u.rating,onChange:e=>h({...u,rating:parseInt(e.target.value)}),className:"admin-input",children:[(0,a.jsx)("option",{value:"5",children:"⭐⭐⭐⭐⭐ (5)"}),(0,a.jsx)("option",{value:"4",children:"⭐⭐⭐⭐ (4)"}),(0,a.jsx)("option",{value:"3",children:"⭐⭐⭐ (3)"}),(0,a.jsx)("option",{value:"2",children:"⭐⭐ (2)"}),(0,a.jsx)("option",{value:"1",children:"⭐ (1)"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>o(!1),className:"admin-btn-secondary",children:"Annuler"}),(0,a.jsx)("button",{type:"submit",className:"admin-btn-primary",children:x?"Sauvegarder":"Ajouter"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:n?(0,a.jsx)("div",{className:"flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin w-6 h-6 border-4 border-indigo-500 border-t-transparent rounded-full"})}):0===w.length?(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-12 text-center",children:[(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCED"}),(0,a.jsx)("p",{className:"text-slate-500 mt-2",children:"Aucun \xe9l\xe9ment dans cette cat\xe9gorie"})]}):w.map(e=>(0,a.jsx)("div",{className:"admin-glass rounded-2xl p-5 border-l-4 ".concat(e.isActive?"border-green-500":"border-amber-500 bg-amber-500/5"),children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[e.imageUrl?(0,a.jsxs)("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-zinc-800 shrink-0 border border-white/10 group relative",children:[(0,a.jsx)("img",{src:e.imageUrl,alt:e.name,className:"w-full h-full object-cover"}),(0,a.jsx)("a",{href:e.imageUrl,target:"_blank",className:"absolute inset-0 bg-black/50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:"\uD83D\uDD0D"})]}):(0,a.jsx)("div",{className:"w-16 h-16 shrink-0 rounded-full bg-gradient-to-br ".concat("WhatsApp"===e.source?"from-green-500 to-emerald-600":"UserSubmission"===e.source?"from-blue-500 to-indigo-600":"from-purple-500 to-indigo-600"," flex items-center justify-center text-white font-bold shadow-lg shadow-black/20"),children:e.name.charAt(0)}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)("span",{className:"font-semibold text-slate-900 dark:text-white",children:e.name}),(0,a.jsx)("span",{className:"text-xs text-slate-400",children:(0,i.WU)(new Date(e.date),"dd/MM/yyyy")}),(0,a.jsx)("span",{className:"admin-badge ".concat(e.isActive?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-300":"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300"),children:e.isActive?"Publi\xe9":"En attente"}),(0,a.jsx)("span",{className:"admin-badge admin-badge-info",children:"UserSubmission"===e.source?"Utilisateur":e.source}),e.rating&&(0,a.jsxs)("span",{className:"text-yellow-500 text-sm",children:["★".repeat(e.rating),"☆".repeat(5-e.rating)]})]}),(0,a.jsx)("p",{className:"text-slate-600 dark:text-slate-300 mt-2 text-sm line-clamp-2",children:e.text})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{onClick:()=>N(e),className:"p-2 rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/30 text-indigo-500",title:"Modifier",children:"✏️"}),(0,a.jsx)("button",{onClick:()=>j(e.id,e.isActive),className:"p-2 rounded-lg ".concat(e.isActive?"hover:bg-amber-100 text-amber-600":"bg-green-100 text-green-600 hover:bg-green-200"),title:e.isActive?"Masquer":"Valider et Publier",children:e.isActive?"\uD83D\uDEAB":"✅"}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:"p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 text-red-500",title:"Supprimer",children:"\uD83D\uDDD1️"})]})]})},e.id))})]})}var z=s(9176);function M(){let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!1),[r,n]=(0,l.useState)(null),[d,c]=(0,l.useState)({name:"Joueur",message:"Valid\xe9 avec succ\xe8s ! ✅",amount:"500,000 XAF",time:"12:00",type:"win",imageUrl:"",file:null}),[o,x]=(0,l.useState)(null);(0,l.useEffect)(()=>{m()},[]);let m=async()=>{try{let e=await fetch("/api/admin/screenshots");if(e.ok){let s=await e.json();t(s.screenshots||[])}}catch(e){console.error("Error fetching items",e)}},u=(e,t)=>{x({type:e,message:t}),setTimeout(()=>x(null),3e3)},h=async e=>{e.preventDefault();try{let e=new FormData;r&&e.append("id",r),e.append("name",d.name),e.append("message",d.message),e.append("amount",d.amount),e.append("time",d.time),e.append("type",d.type),d.imageUrl&&e.append("imageUrl",d.imageUrl),e.append("isActive","true"),d.file&&e.append("file",d.file);let t=r?"PUT":"POST";(await fetch("/api/admin/screenshots",{method:t,body:e})).ok&&(i(!1),n(null),c({name:"Joueur",message:"Valid\xe9 avec succ\xe8s ! ✅",amount:"500,000 XAF",time:"12:00",type:"win",imageUrl:"",file:null}),m(),u("success","Capture enregistr\xe9e !"))}catch(e){console.error(e),u("error","Erreur d'enregistrement")}},p=async(e,t)=>{try{await fetch("/api/admin/screenshots",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,isActive:!t})}),m()}catch(e){console.error("Error toggling active status",e)}},g=async e=>{if(confirm("Supprimer cette capture ?"))try{await fetch("/api/admin/screenshots?id=".concat(e),{method:"DELETE"}),m()}catch(e){console.error("Error deleting item",e)}},b=e=>{c({name:e.name,message:e.message,amount:e.amount,time:e.time,type:e.type,imageUrl:e.imageUrl||"",file:null}),n(e.id),i(!0)};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-400 bg-clip-text text-transparent",children:"Captures WhatsApp (Marquee)"}),(0,a.jsx)("p",{className:"text-zinc-400 text-sm",children:"G\xe9rez les preuves qui d\xe9filent en haut du site pour la cr\xe9dibilit\xe9."})]}),(0,a.jsxs)("button",{onClick:()=>{i(!s),n(null)},className:"admin-btn-primary flex items-center gap-2",children:[(0,a.jsx)("span",{children:s?"✕":"+"})," ",s?"Fermer":"Nouvelle Capture"]})]}),o&&(0,a.jsx)("div",{className:"p-4 rounded-xl text-center font-medium ".concat("success"===o.type?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:o.message}),s&&(0,a.jsxs)("form",{onSubmit:h,className:"admin-glass p-8 rounded-3xl border border-indigo-500/30 shadow-2xl relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-600"}),(0,a.jsx)("h3",{className:"text-xl font-bold mb-6 text-white",children:r?"Modifier la Capture":"Ajouter une Preuve"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-zinc-400 mb-1 block",children:"Titre / Nom du Joueur"}),(0,a.jsx)("input",{className:"admin-input",placeholder:"Ex: Marc, Coach Pronos...",value:d.name,onChange:e=>c({...d,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-zinc-400 mb-1 block",children:"Montant du Gain"}),(0,a.jsx)("input",{className:"admin-input",placeholder:"Ex: 1,500,000 XAF",value:d.amount,onChange:e=>c({...d,amount:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-zinc-400 mb-1 block",children:"Heure"}),(0,a.jsx)("input",{className:"admin-input",placeholder:"Ex: 12:00",value:d.time,onChange:e=>c({...d,time:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-zinc-400 mb-1 block",children:"Type"}),(0,a.jsxs)("select",{className:"admin-input",value:d.type,onChange:e=>c({...d,type:e.target.value}),children:[(0,a.jsx)("option",{value:"win",children:"Gain (Win)"}),(0,a.jsx)("option",{value:"thanks",children:"Remerciement"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-zinc-400 mb-1 block",children:"Message Chat"}),(0,a.jsx)("textarea",{className:"admin-input",rows:2,value:d.message,onChange:e=>c({...d,message:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"space-y-4 bg-black/20 p-6 rounded-2xl border border-white/5",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-indigo-300 mb-2",children:"Preuve Visuelle (Image du Ticket)"}),(0,a.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-zinc-700 rounded-xl cursor-pointer hover:border-indigo-500 hover:bg-indigo-500/10 transition-all",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,a.jsx)("svg",{className:"w-8 h-8 mb-3 text-zinc-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,a.jsx)("p",{className:"text-sm text-zinc-400",children:"Cliquez pour uploader"})]}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>{var t;return c({...d,file:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null})}})]})}),d.file&&(0,a.jsxs)("p",{className:"text-xs text-green-400 text-center",children:["Fichier s\xe9lectionn\xe9 : ",d.file.name]})]})]}),(0,a.jsxs)("div",{className:"mt-8 flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>i(!1),className:"admin-btn-secondary",children:"Annuler"}),(0,a.jsx)("button",{type:"submit",className:"admin-btn-primary px-8",children:"Enregistrer"})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:e.map(e=>(0,a.jsxs)("div",{className:"relative group flex justify-center",children:[(0,a.jsx)("div",{className:"transform transition-all duration-300 ".concat(e.isActive?"hover:scale-105":"opacity-50 grayscale"),children:(0,a.jsx)(z.WhatsAppScreenshot,{name:e.name,message:e.message,amount:e.amount,time:e.time,imageUrl:e.imageUrl,type:e.type})}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center gap-3 rounded-2xl backdrop-blur-sm z-50",children:[(0,a.jsx)("span",{className:"text-white font-bold mb-2",children:e.isActive?"En ligne":"Masqu\xe9"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>p(e.id,e.isActive),className:"p-3 rounded-full ".concat(e.isActive?"bg-red-500/20 text-red-500 hover:bg-red-500":"bg-green-500/20 text-green-500 hover:bg-green-500"," hover:text-white transition-all"),title:e.isActive?"Masquer":"Publier",children:e.isActive?"\uD83D\uDEAB":"✅"}),(0,a.jsx)("button",{onClick:()=>b(e),className:"p-3 rounded-full bg-indigo-500/20 text-indigo-500 hover:bg-indigo-500 hover:text-white transition-all",children:"✏️"}),(0,a.jsx)("button",{onClick:()=>g(e.id),className:"p-3 rounded-full bg-zinc-800 text-zinc-400 hover:bg-red-600 hover:text-white transition-all",children:"\uD83D\uDDD1️"})]})]})]},e.id))}),0===e.length&&!s&&(0,a.jsxs)("div",{className:"text-center py-20 opacity-50",children:[(0,a.jsx)("p",{className:"text-xl",children:"Aucune capture pour le moment."}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"Ajoutez-en une pour voir le r\xe9sultat."})]})]})}function U(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[n,d]=(0,l.useState)(!1),[c,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)({title:"",url:"",thumbnailUrl:"",file:null,thumbnailFile:null}),[u,h]=(0,l.useState)(null);(0,l.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await fetch("/api/admin/videos");if(e.ok){let s=await e.json();t(s.videos||[])}}catch(e){console.error("Error fetching videos",e)}finally{r(!1)}},g=(e,t)=>{h({type:e,message:t}),setTimeout(()=>h(null),3e3)},b=async e=>{e.preventDefault(),d(!0);try{let e=new FormData;e.append("title",x.title),e.append("url",x.url),e.append("thumbnailUrl",x.thumbnailUrl),x.file&&e.append("file",x.file),x.thumbnailFile&&e.append("thumbnailFile",x.thumbnailFile),(await fetch("/api/admin/videos",{method:"POST",body:e})).ok?(m({title:"",url:"",thumbnailUrl:"",file:null,thumbnailFile:null}),o(!1),p(),g("success","Vid\xe9o ajout\xe9e avec succ\xe8s")):g("error","Erreur lors de l'ajout")}catch(e){console.error(e),g("error","Erreur serveur")}finally{d(!1)}},f=async(e,t)=>{try{await fetch("/api/admin/videos",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,isActive:!t})}),p(),g("success",t?"Vid\xe9o d\xe9sactiv\xe9e":"Vid\xe9o activ\xe9e")}catch(e){console.error("Error toggling active status",e)}},j=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer cette vid\xe9o ?"))try{await fetch("/api/admin/videos?id=".concat(e),{method:"DELETE"}),p(),g("success","Vid\xe9o supprim\xe9e")}catch(e){console.error("Error deleting video",e)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[u&&(0,a.jsxs)("div",{className:"p-4 rounded-xl mb-4 text-white font-medium flex items-center gap-2 ".concat("success"===u.type?"bg-green-500/80":"bg-red-500/80"),children:[(0,a.jsx)("span",{children:"success"===u.type?"✓":"⚠"}),(0,a.jsx)("p",{children:u.message})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Gestion des Vid\xe9os"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Ajoutez et g\xe9rez les vid\xe9os visibles sur la page d'accueil"})]}),(0,a.jsxs)("button",{onClick:()=>o(!c),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg hover:shadow-lg hover:shadow-blue-500/25 transition-all flex items-center gap-2",children:[(0,a.jsx)("span",{children:c?"✕":"+"})," ",c?"Annuler":"Nouvelle Vid\xe9o"]})]}),c&&(0,a.jsxs)("div",{className:"mb-6 bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4 border border-slate-200 dark:border-slate-700",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-800 dark:text-white mb-3",children:"Ajouter une vid\xe9o"}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Titre"}),(0,a.jsx)("input",{type:"text",required:!0,value:x.title,onChange:e=>m({...x,title:e.target.value}),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-900 px-3 py-2",placeholder:"Ex: Tutoriel Inscription"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Fichier Vid\xe9o"}),(0,a.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{var t;return m({...x,file:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null})},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900/30 dark:file:text-blue-200"}),(0,a.jsxs)("div",{className:"relative flex py-1 items-center",children:[(0,a.jsx)("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"}),(0,a.jsx)("span",{className:"flex-shrink-0 mx-2 text-xs text-slate-400 uppercase",children:"ou URL"}),(0,a.jsx)("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})]}),(0,a.jsx)("input",{type:"url",value:x.url,onChange:e=>m({...x,url:e.target.value}),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-900 px-3 py-2",placeholder:"https://..."})]}),(0,a.jsxs)("div",{className:"space-y-2 bg-slate-50 dark:bg-slate-800/50 p-3 rounded-lg border border-slate-200 dark:border-slate-700",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Miniature (Image)"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return m({...x,thumbnailFile:(null===(t=e.target.files)||void 0===t?void 0:t[0])||null})},className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100 dark:file:bg-indigo-900/30 dark:file:text-indigo-200"}),(0,a.jsxs)("div",{className:"relative flex py-1 items-center",children:[(0,a.jsx)("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"}),(0,a.jsx)("span",{className:"flex-shrink-0 mx-2 text-xs text-slate-400 uppercase",children:"ou URL Image"}),(0,a.jsx)("div",{className:"flex-grow border-t border-slate-200 dark:border-slate-700"})]}),(0,a.jsx)("input",{type:"url",value:x.thumbnailUrl,onChange:e=>m({...x,thumbnailUrl:e.target.value}),className:"w-full rounded-lg border-slate-300 dark:border-slate-600 dark:bg-slate-900 px-3 py-2",placeholder:"https://..."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 text-sm",children:[(0,a.jsx)("button",{type:"button",onClick:()=>o(!1),className:"px-3 py-1.5 text-slate-500 hover:text-slate-700",children:"Annuler"}),(0,a.jsx)("button",{type:"submit",disabled:n,className:"px-4 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:n?"Enregistrement...":"Ajouter la vid\xe9o"})]})]})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s?(0,a.jsx)("div",{className:"col-span-full flex justify-center py-12",children:(0,a.jsx)("div",{className:"animate-spin w-6 h-6 border-4 border-indigo-500 border-t-transparent rounded-full"})}):0===e.length?(0,a.jsx)("div",{className:"col-span-full text-center py-12 text-slate-500",children:"Aucune vid\xe9o"}):e.map(e=>(0,a.jsxs)("div",{className:"admin-glass rounded-xl overflow-hidden group ".concat(e.isActive?"":"opacity-60"),children:[(0,a.jsxs)("div",{className:"aspect-video bg-black relative",children:[(0,a.jsx)("video",{src:e.url,className:"w-full h-full object-cover opacity-80",poster:e.thumbnailUrl||void 0}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{d:"M8 5v14l11-7z"})})})}),(0,a.jsx)("div",{className:"absolute top-2 right-2 flex gap-1",children:(0,a.jsx)("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase ".concat(e.isActive?"bg-blue-500 text-white":"bg-slate-500 text-slate-200"),children:e.isActive?"Actif":"Inactif"})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:e.title}),(0,a.jsxs)("p",{className:"text-xs text-slate-500 mb-4",children:["Ajout\xe9 le ",(0,i.WU)(new Date(e.createdAt),"dd/MM/yyyy")]}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("button",{onClick:()=>f(e.id,e.isActive),className:"flex-1 px-3 py-1.5 rounded-lg text-xs font-medium border ".concat(e.isActive?"border-indigo-200 text-indigo-600 hover:bg-indigo-50 dark:hover:bg-indigo-900/20":"border-blue-200 text-blue-600 hover:bg-blue-50"," transition-colors"),children:e.isActive?"Masquer":"Afficher"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"px-3 py-1.5 rounded-lg text-xs font-medium text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Supprimer"})]})]})]},e.id))})]})}function L(){let[e,t]=(0,l.useState)(""),[s,r]=(0,l.useState)("info"),[n,d]=(0,l.useState)(!1),[c,o]=(0,l.useState)([]),[x,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/admin/broadcast/history");e.ok&&o(await e.json())}catch(e){}},h=async a=>{if(a.preventDefault(),e){d(!0);try{if((await fetch("/api/admin/broadcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,level:s})})).ok)m({type:"success",message:"Notification Bulle activ\xe9e pour 24h !"}),t(""),u();else throw Error("Erreur d&apos;envoi")}catch(e){console.error(e),m({type:"error",message:"Erreur lors de la cr\xe9ation."})}finally{d(!1),setTimeout(()=>m(null),3e3)}}};return(0,a.jsxs)("div",{className:"max-w-4xl space-y-6",children:[x&&(0,a.jsxs)("div",{className:"admin-alert admin-alert-".concat(x.type),children:[(0,a.jsx)("span",{className:"text-xl",children:"success"===x.type?"✓":"⚠"}),(0,a.jsx)("p",{children:x.message})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("h3",{className:"text-xl font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-3xl",children:"\uD83D\uDCAC"})," Notifications Bulles (Site)"]}),(0,a.jsx)("div",{className:"bg-blue-500/10 text-blue-500 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:"Diffusion : Tout le Monde"})]}),(0,a.jsx)("p",{className:"mb-6 text-slate-500 dark:text-slate-400 text-sm",children:"Ces messages s'affichent sous forme de bulles flottantes sur le site de tous les visiteurs pendant 24h."}),(0,a.jsxs)("form",{onSubmit:h,className:"space-y-4 max-w-xl",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Type de Message"}),(0,a.jsxs)("select",{value:s,onChange:e=>r(e.target.value),className:"admin-input cursor-pointer",children:[(0,a.jsx)("option",{value:"info",children:"\uD83D\uDCE2 Info G\xe9n\xe9rale (Bleu)"}),(0,a.jsx)("option",{value:"success",children:"\uD83C\uDF89 Succ\xe8s / Promo (F\xeate)"}),(0,a.jsx)("option",{value:"urgent",children:"\uD83D\uDEA8 Urgent / Important (Rouge)"}),(0,a.jsx)("option",{value:"warning",children:"⚠️ Attention (Jaune)"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Message (Court et Percutant)"}),(0,a.jsx)("textarea",{required:!0,value:e,onChange:e=>t(e.target.value),rows:3,placeholder:"Ex: Plus que 2 heures pour profiter du code promo !",className:"admin-input",maxLength:100}),(0,a.jsxs)("p",{className:"text-xs text-right text-slate-400 mt-1",children:[e.length,"/100 caract\xe8res"]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{type:"submit",disabled:n||0===e.length,className:"admin-btn-primary w-full py-3 flex items-center justify-center gap-2",children:n?(0,a.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"\uD83D\uDE80"})," Diffuser sur le site (24h)"]})})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6 h-fit",children:[(0,a.jsx)("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Aper\xe7u en Direct"}),(0,a.jsx)("div",{className:"bg-zinc-900 border border-blue-500/30 p-4 rounded-xl shadow-lg relative max-w-xs mx-auto lg:mx-0",children:(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:"urgent"===s?"\uD83D\uDEA8":"success"===s?"\uD83C\uDF89":"warning"===s?"⚠️":"\uD83D\uDCE2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-semibold text-sm",children:e||"Votre message ici..."}),(0,a.jsx)("p",{className:"text-[10px] text-zinc-500 mt-1 uppercase tracking-widest",children:"Message Admin"})]})]})}),(0,a.jsx)("p",{className:"text-xs text-center text-slate-400 mt-4",children:"C'est exactement ce que verront vos visiteurs."})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-slate-900 dark:text-white mb-4 flex justify-between items-center",children:[(0,a.jsx)("span",{children:"Historique (Derni\xe8res 24h)"}),(0,a.jsx)("button",{onClick:u,className:"text-xs text-blue-500 hover:text-blue-600",children:"Actualiser"})]}),(0,a.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:0===c.length?(0,a.jsx)("p",{className:"text-sm text-slate-400 italic",children:"Aucune notification r\xe9cente."}):c.map(e=>(0,a.jsxs)("div",{className:"p-3 bg-white dark:bg-slate-800/50 rounded-lg border border-slate-100 dark:border-slate-700/50",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-1",children:[(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("urgent"===e.level?"bg-red-100 text-red-600":"success"===e.level?"bg-green-100 text-green-600":"bg-blue-100 text-blue-600"," uppercase font-bold text-[10px]"),children:e.level}),(0,a.jsx)("span",{className:"text-[10px] text-slate-400",children:(0,i.WU)(new Date(e.createdAt),"HH:mm",{locale:j.fr})})]}),(0,a.jsx)("p",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium line-clamp-2",children:e.message})]},e.id))})]})]})]})}function T(e){let{admin:t}=e,[s,i]=(0,l.useState)("BCC123"),[r,n]=(0,l.useState)("12000"),[d,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(null),m=(e,t)=>{x({type:e,message:t}),setTimeout(()=>x(null),3e3)};(0,l.useEffect)(()=>{fetch("/api/admin/settings/promo").then(e=>e.json()).then(e=>{e.code&&i(e.code)})},[]);let u=async()=>{c(!0);try{if((await fetch("/api/admin/settings/promo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({promoCode:s})})).ok)m("success","Code promo mis \xe0 jour !");else throw Error("Failed")}catch(e){console.error(e),m("error","Erreur lors de la mise \xe0 jour")}finally{c(!1)}},h=async()=>{try{let e=await fetch("/api/admin/export/events");if(e.ok){let t=await e.blob(),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download="evenements_".concat(new Date().toISOString().split("T")[0],".csv"),a.click(),window.URL.revokeObjectURL(s),m("success","Export des \xe9v\xe9nements t\xe9l\xe9charg\xe9 !")}}catch(e){console.error(e),m("error","Erreur lors de l&apos;export")}};return(0,a.jsxs)("div",{className:"max-w-3xl space-y-6",children:[o&&(0,a.jsxs)("div",{className:"admin-alert admin-alert-".concat(o.type),children:[(0,a.jsx)("span",{className:"text-xl",children:"success"===o.type?"✓":"⚠"}),(0,a.jsx)("p",{children:o.message})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center shadow-lg",children:(0,a.jsx)("span",{className:"text-2xl font-bold text-white",children:t.name.charAt(0)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:t.name}),(0,a.jsx)("p",{className:"text-slate-500",children:t.email}),(0,a.jsx)("span",{className:"admin-badge admin-badge-info mt-1",children:t.role})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wide mb-1",children:"ID Compte"}),(0,a.jsx)("p",{className:"font-mono text-sm text-slate-600 dark:text-slate-300 truncate",children:t.id})]}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50",children:[(0,a.jsx)("p",{className:"text-xs text-slate-400 uppercase tracking-wide mb-1",children:"Derni\xe8re connexion"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Maintenant"})]})]})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:"⚙️"}),"Param\xe8tres du site"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Code promo affich\xe9"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),className:"admin-input font-mono text-lg"}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:"Ce code sera affich\xe9 sur la page principale"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nombre d'utilisateurs affich\xe9"}),(0,a.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),className:"admin-input"}),(0,a.jsx)("p",{className:"text-xs text-slate-400 mt-1",children:'Affich\xe9 dans "D\xe9j\xe0 X personnes l\'ont appliqu\xe9e"'})]}),(0,a.jsxs)("button",{onClick:u,disabled:d,className:"admin-btn-primary flex items-center gap-2",children:[d?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):"\uD83D\uDCBE",d?"Enregistrement...":"Enregistrer"]})]})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-slate-900 dark:text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:"\uD83D\uDCCA"}),"Exports de donn\xe9es"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("button",{onClick:h,className:"admin-btn-secondary flex items-center justify-center gap-2 py-4",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC8"})," Exporter les \xe9v\xe9nements (CSV)"]}),(0,a.jsxs)("a",{href:"/api/admin/export/users",className:"admin-btn-secondary flex items-center justify-center gap-2 py-4",children:[(0,a.jsx)("span",{children:"\uD83D\uDC65"})," Exporter les utilisateurs (CSV)"]})]})]}),(0,a.jsxs)("div",{className:"rounded-2xl border-2 border-dashed border-red-200 dark:border-red-900/50 p-6 bg-red-50/50 dark:bg-red-900/10",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-2 flex items-center gap-2",children:[(0,a.jsx)("span",{children:"⚠️"})," Zone dangereuse"]}),(0,a.jsx)("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Ces actions sont irr\xe9versibles. Utilisez avec pr\xe9caution."}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsx)("button",{className:"px-4 py-2 rounded-xl bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 font-medium hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors text-sm",children:"R\xe9initialiser les statistiques"}),(0,a.jsx)("button",{className:"px-4 py-2 rounded-xl bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 font-medium hover:bg-red-200 dark:hover:bg-red-900/50 transition-colors text-sm",children:"Supprimer tous les utilisateurs"})]})]})]})}function V(e){let{admin:t}=e,[s,i]=(0,l.useState)("overview"),[r,n]=(0,l.useState)(null),[d,c]=(0,l.useState)(!0),[o,x]=(0,l.useState)(!1),m=(0,l.useCallback)(async()=>{try{let e=await fetch("/api/admin/stats");if(e.ok){let t=await e.json();n(t)}}catch(e){console.error(e)}finally{c(!1)}},[]);return(0,l.useEffect)(()=>{m();let e=setInterval(m,6e4);return()=>clearInterval(e)},[m]),(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)("button",{onClick:()=>x(!o),className:"lg:hidden fixed top-4 left-4 z-50 p-3 rounded-xl bg-white dark:bg-slate-800 shadow-lg",children:(0,a.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,a.jsx)(f,{admin:t,activeTab:s,onTabChange:i,isOpen:o,onClose:()=>x(!1)}),(0,a.jsxs)("main",{className:"lg:ml-72 min-h-screen",children:[(0,a.jsx)(v,{title:{overview:"Vue d'ensemble",analytics:"Analytics",users:"Utilisateurs",screenshots:"Captures (Marquee)",testimonials:"T\xe9moignages",videos:"Vid\xe9os",push:"Notifications Push",settings:"Param\xe8tres"}[s],onRefresh:m}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===s&&(0,a.jsx)(P,{stats:r,isLoading:d}),"analytics"===s&&(0,a.jsx)(D,{}),"users"===s&&(0,a.jsx)(A,{}),"screenshots"===s&&(0,a.jsx)(M,{}),"testimonials"===s&&(0,a.jsx)(E,{}),"videos"===s&&(0,a.jsx)(U,{}),"push"===s&&(0,a.jsx)(L,{}),"settings"===s&&(0,a.jsx)(T,{admin:t})]})]})]})}function P(e){let{stats:t,isLoading:s}=e;if(s)return(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-indigo-500 border-t-transparent rounded-full"})});if(!t)return null;let l=[{label:"Avis Re\xe7us",value:t.overview.totalTestimonials,icon:"\uD83D\uDCAC",gradient:"from-indigo-500 to-purple-500"},{label:"Vues aujourd'hui",value:t.overview.todayPageViews,icon:"\uD83D\uDC41️",gradient:"from-pink-500 to-rose-500",growth:8},{label:"Copies du code",value:t.overview.todayCodeCopies,icon:"\uD83D\uDCCB",gradient:"from-emerald-500 to-teal-500",growth:24},{label:"Notifs Envoy\xe9es",value:t.overview.totalNotificationsSent,icon:"\uD83D\uDE80",gradient:"from-indigo-500 to-blue-500"},{label:"Taux conversion",value:"".concat(t.overview.conversionRate,"%"),icon:"\uD83C\uDFAF",gradient:"from-amber-500 to-orange-500"}];return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"admin-glass admin-stat-card rounded-2xl p-5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),e.growth&&(0,a.jsxs)("span",{className:"admin-badge admin-badge-success",children:["+",e.growth,"%"]})]}),(0,a.jsx)("p",{className:"text-2xl sm:text-3xl font-bold bg-gradient-to-r ".concat(e.gradient," bg-clip-text text-transparent"),children:"number"==typeof e.value?e.value.toLocaleString("fr-FR"):e.value}),(0,a.jsx)("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:e.label})]},t))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6 admin-chart-container",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"Activit\xe9 (7 jours)"}),(0,a.jsx)("div",{className:"h-64 w-full relative",children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(n.w,{data:t.dailyStats,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#e2e8f0",opacity:.3}),(0,a.jsx)(c.K,{dataKey:"label",tick:{fontSize:12},stroke:"#94a3b8"}),(0,a.jsx)(o.B,{tick:{fontSize:12},stroke:"#94a3b8"}),(0,a.jsx)(x.u,{contentStyle:{backgroundColor:"#1e1e2e",border:"1px solid #6366f1",borderRadius:"12px",color:"#fff"}}),(0,a.jsx)(m.x1,{type:"monotone",dataKey:"pageViews",stroke:"#6366f1",strokeWidth:2,dot:!1,name:"Vues"}),(0,a.jsx)(m.x1,{type:"monotone",dataKey:"codeCopies",stroke:"#ec4899",strokeWidth:2,dot:!1,name:"Copies"})]})})})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl p-6 admin-chart-container",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white mb-4",children:"\xc9v\xe9nements"}),(0,a.jsx)("div",{className:"h-64 w-full relative",children:(0,a.jsx)(r.h,{width:"100%",height:"100%",children:(0,a.jsxs)(u.v,{data:t.eventsByType,children:[(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#e2e8f0",opacity:.3}),(0,a.jsx)(c.K,{dataKey:"type",tick:{fontSize:10},stroke:"#94a3b8"}),(0,a.jsx)(o.B,{tick:{fontSize:12},stroke:"#94a3b8"}),(0,a.jsx)(x.u,{contentStyle:{backgroundColor:"#1e1e2e",border:"1px solid #6366f1",borderRadius:"12px",color:"#fff"}}),(0,a.jsx)(h.$Q,{dataKey:"count",fill:"url(#colorGradient)",radius:[8,8,0,0]}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#6366f1"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#ec4899"})]})})]})})})]})]}),(0,a.jsxs)("div",{className:"admin-glass rounded-2xl overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-5 border-b border-indigo-100 dark:border-indigo-900/30 flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900 dark:text-white",children:"Inscriptions r\xe9centes"}),(0,a.jsxs)("span",{className:"admin-badge admin-badge-info",children:[t.recentUsers.length," r\xe9cents"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"admin-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Contact"}),(0,a.jsx)("th",{children:"Code"}),(0,a.jsx)("th",{children:"Source"}),(0,a.jsx)("th",{children:"Statut"}),(0,a.jsx)("th",{children:"Date"})]})}),(0,a.jsx)("tbody",{children:0===t.recentUsers.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"text-center py-8 text-slate-500",children:"Aucun utilisateur"})}):t.recentUsers.slice(0,5).map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-medium text-slate-900 dark:text-white",children:e.email||e.phone||"—"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"font-mono text-indigo-600 dark:text-indigo-400 bg-indigo-50 dark:bg-indigo-900/30 px-2 py-1 rounded",children:e.promoCode})}),(0,a.jsx)("td",{className:"text-slate-500",children:e.source||"—"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"admin-badge ".concat("active"===e.status?"admin-badge-success":"admin-badge-warning"),children:e.status})}),(0,a.jsx)("td",{className:"text-slate-500 text-sm",children:(0,i.WU)(new Date(e.createdAt),"dd/MM HH:mm")})]},e.id))})]})})]})]})}}},function(e){e.O(0,[434,720,971,117,744],function(){return e(e.s=429)}),_N_E=e.O()}]);